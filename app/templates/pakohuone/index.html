{% extends "header.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "macros.html" as macros %}

{% block content %}
    <script src="{{ url_for('static',filename='pakohuone.js') }}"></script>
    <script type="text/javascript">
        var varatut = myFunc({{ varatut | tojson }});
    </script>

    <div class="container p-3">

        <h1>OTYn Pakopelipäivä</h1>

        <p>Ilmoita koko joukkue (5-6 henkilöä) kerralla. Huoneita on varattu
            10 per kierros. Ensimmäinen kierros alkaa 18:00 ja toinen kierros 19:30.</p>

        <div class="container p-3">
            <div>
                <h4>{{ event.get_title() }}</h4>
                <h6>* merkityt kohdat pakollisia</h6>
                {{ macros.privacy_statement('tietosuojaseloste_pakohuone.pdf') }}
            </div>
            {% if event.get_start_time() < nowtime < event.get_end_time() %}
                <form class="form form-horizontal" method="post" role="form">
                    {{ form.hidden_tag() }}
                    {{ macros.form_field(form.aika) }}
                    <div id="huone1800" style="display: none;">
                        {{ macros.form_field(form.huone1800) }}
                    </div>
                    <div id="huone1930" style="display: none;">
                        {{ macros.form_field(form.huone1930) }}
                    </div>
                    {{ macros.form_field(form.etunimi0) }}
                    {{ macros.form_field(form.sukunimi0) }}
                    {{ macros.form_field(form.phone0) }}
                    {{ macros.form_field(form.email0) }}
                    {{ macros.form_field(form.etunimi1) }}
                    {{ macros.form_field(form.sukunimi1) }}
                    {{ macros.form_field(form.etunimi2) }}
                    {{ macros.form_field(form.sukunimi2) }}
                    {{ macros.form_field(form.etunimi3) }}
                    {{ macros.form_field(form.sukunimi3) }}
                    {{ macros.form_field(form.etunimi4) }}
                    {{ macros.form_field(form.sukunimi4) }}
                    {{ macros.form_field(form.etunimi5) }}
                    {{ macros.form_field(form.sukunimi5) }}
                    {{ macros.form_field(form.consent0) }}
                    <button class="btn btn-info">
                        {{ macros.form_field(form.submit) }}
                    </button>
                    <p>Ilmoittautuminen päättyy {{ event.get_end_time() }}</p>
                </form>
            {% elif nowtime < event.get_start_time() %}
                <p>Ilmoittautuminen alkaa {{ event.get_start_time() }}</p>
            {% else %}
                <p>Ilmoittautuminen on päättynyt</p>
            {% endif %}

            {{ macros.participant_count(entries|length, event) }}
            {#
            {% call(entry) macros.participant_list_routine(entries, event, 0, event.get_participant_limit()) %}
                <p>{{ entry.teamname }}</p>
            {% endcall %}
            {% call(entry) macros.participant_list_routine(entries, event, event.get_participant_limit(), event.get_max_limit()) %}
                <p>{{ entry.teamname }} (Varasijalla)</p>
            {% endcall %}
            #}
        </div>
    </div>
{% endblock %}