{% extends "form.html" %}
{% import "bootstrap/wtf.html" as wtf %}
{% import "macros.html" as macros %}

{% block event_info %}
    <h1>Pubivisa</h1>
    <p>Ilmoita koko joukkue (3-4 henkilöä) kerralla. Ilmoittautumisia otetaan vastaan, jos ilmoittautuneiden
        yhteenlaskettu määrä joukkueenne mukaan lukien on korkeintaan 50</p>
    <p><strong>Mikäli olet sairas etkä pääsekään paikalle, ole yhteydessä Riikka Haatajaan 0442828255 (Whatsapp,
        Telegram tai tekstiviesti)</strong></p>
{% endblock %}

{% block registration_form %}
    {% if event.get_start_time() < nowtime < event.get_end_time() %}
        <form class="form form-horizontal" method="post" role="form">
            {{ form.hidden_tag() }}
            {{ macros.form_field(form.teamname) }}
            {{ macros.form_field(form.firstname) }}
            {{ macros.form_field(form.lastname) }}
            {{ macros.form_field(form.phone0) }}
            {{ macros.form_field(form.email) }}
            {{ macros.form_field(form.kilta0) }}
            {{ macros.form_field(form.etunimi1) }}
            {{ macros.form_field(form.sukunimi1) }}
            {{ macros.form_field(form.phone1) }}
            {{ macros.form_field(form.email1) }}
            {{ macros.form_field(form.kilta1) }}
            {{ macros.form_field(form.etunimi2) }}
            {{ macros.form_field(form.sukunimi2) }}
            {{ macros.form_field(form.phone2) }}
            {{ macros.form_field(form.email2) }}
            {{ macros.form_field(form.kilta2) }}
            {{ macros.form_field(form.etunimi3) }}
            {{ macros.form_field(form.sukunimi3) }}
            {{ macros.form_field(form.phone3) }}
            {{ macros.form_field(form.email3) }}
            {{ macros.form_field(form.kilta3) }}
            {{ macros.form_field(form.show_name_consent) }}
            {{ macros.form_field(form.privacy_consent) }}
            {{ macros.form_field(form.binding_registration_consent) }}
            {{ macros.form_submit_button() }}

            <p>Ilmoittautuminen päättyy {{ event.get_end_time() }}</p>
        </form>
    {% elif nowtime < event.get_start_time() %}
        <p>Ilmoittautuminen alkaa {{ event.get_start_time() }}</p>
    {% else %}
        <p>Ilmoittautuminen on päättynyt</p>
    {% endif %}

    {{ macros.participant_count(participant_count, event) }}
    {% call(entry) macros.participant_list_routine(entries, event, 0, event.get_participant_limit()) %}
        <p>{{ entry.teamname }}</p>
    {% endcall %}
    {% call(entry) macros.participant_list_routine(entries, event, event.get_participant_limit(), event.get_max_limit()) %}
        <p>{{ entry.teamname }} (Varasijalla)</p>
    {% endcall %}
{% endblock %}